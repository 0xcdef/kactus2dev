#include "HtmlWriter.h"

#include <kactusGenerators/DocumentGenerator/DocumentGeneratorHTML.h>
#include <IPXACTmodels/Component/Component.h>

#include <QDateTime>
#include <QSettings>

HtmlWriter::HtmlWriter(QSharedPointer<Component> component) :
    component_(component)
{
}

HtmlWriter::~HtmlWriter()
{
}

void HtmlWriter::writeHeader(QTextStream& stream)
{
    QSettings settings;
    
    // write the top of the html document
    stream << DocumentGeneratorHTML::docType() << Qt::endl;
    stream << "<html>" << Qt::endl;
    stream << "\t<head>" << Qt::endl;
    stream << "\t" << DocumentGeneratorHTML::encoding() << Qt::endl;
    stream << "\t\t<title>Kactus2 generated documentation for component " <<
        component_->getVlnv().getName() << " " << component_->getVlnv().getVersion() << "</title>" << Qt::endl;
    stream << "\t</head>" << Qt::endl;
    stream << "\t<body>" << Qt::endl;
    stream << "\t\t<h6>This document was generated by Kactus2 on " <<
        QDateTime::currentDateTime().toString("dd.MM.yyyy hh:mm:ss") << " by user " <<
        settings.value("General/Username").toString() << "</h6>" << Qt::endl;
}
